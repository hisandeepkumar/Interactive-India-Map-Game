<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>India Map Match ‚Äî Neon</title>
<style>
  :root {
    --bg: #0b0f1a;
    --panel: #101629;
    --text: #e6f0ff;
    --muted: #9ab0ff;
    --accent: #84a9ff;
    --neon1: #00e5ff;
    --neon2: #4dff91;
    --bad: #ff5e7a;
    --good: #5dffa1;
  }
  html, body {
    height: 100%;
    margin: 0;
    background: radial-gradient(1200px 800px at 70% 0%, #0f1630, var(--bg));
    color: var(--text);
    font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji';
  }
  /*
  ** Request 1 & 5: Layout change for responsiveness and list below map
  */
  .wrap {
    display: flex;
    flex-direction: column; /* Stack panels vertically */
    gap: 16px;
    height: 100%;
    padding: 16px;
    max-width: 1200px; /* Max width for PC */
    margin: 0 auto;
  }
  .panel {
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 20px;
    padding: 16px;
    box-shadow: 0 0 40px rgba(0, 229, 255, 0.06), inset 0 0 60px rgba(77, 255, 145, 0.03);
    backdrop-filter: blur(6px);
  }
  .panel.controls {
    order: 2; /* Move the control panel (list) below the map */
  }
  .map-panel {
    order: 1; /* Map panel first */
    flex-grow: 1;
    min-height: 50vh; /* Minimum height for the map view */
  }
  h1 {
    font-size: 20px;
    letter-spacing: 0.5px;
    margin: 0 0 8px;
    text-shadow: 0 0 12px rgba(0, 229, 255, 0.4);
  }
  .hint {
    font-size: 12px; opacity: 0.8; color: var(--muted); margin-bottom: 12px;
  }
  .actions {
    display: flex; gap: 8px; margin: 12px 0;
  }
  button {
    appearance: none;
    border: 1px solid rgba(255,255,255,0.12);
    background: linear-gradient(180deg, #1a2240, #101629);
    color: var(--text);
    padding: 10px 14px;
    border-radius: 12px;
    cursor: pointer;
    transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease;
    box-shadow: 0 0 0 rgba(0, 229, 255, 0);
  }
  button:hover {
    transform: translateY(-1px);
    border-color: rgba(132,169,255,.8);
    box-shadow: 0 0 18px rgba(0, 229, 255, 0.25), 0 0 30px rgba(77, 255, 145, 0.15);
  }
  .pill {
    display: inline-block;
    padding: 6px 10px;
    border-radius: 999px;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.08);
    font-size: 12px;
    margin-right: 6px;
  }
  .list {
    overflow: auto; max-height: 250px; padding-right: 6px; /* Adjust max-height for new position */
  }
  .state-name {
    display: inline-flex; align-items: center; gap: 8px;
    padding: 8px 10px; margin: 6px 6px 0 0;
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 999px;
    background: #0f1731;
    font-size: 13px;
    cursor: pointer;
    user-select: none;
    box-shadow: 0 0 0 rgba(0, 229, 255, 0);
    transition: transform .08s ease, box-shadow .2s ease, opacity .2s ease, border-color .2s ease;
  }
  .state-name:hover { transform: translateY(-1px); border-color: var(--accent); box-shadow: 0 0 14px rgba(0, 229, 255, 0.25); }
  .state-name.selected { box-shadow: 0 0 22px rgba(0,229,255,.45), inset 0 0 18px rgba(77,255,145,.25); border-color: var(--neon2); }
  .state-name.removed { opacity: .25; pointer-events: none; text-decoration: line-through; }
  .score { margin-top: 12px; font-size: 14px; color: var(--muted); }
  .map-panel { position: relative; }
  .map-shell { height: 100%; width: 100%; display: grid; place-items: center; }
  /* SVG styling */
  .map svg { width: 100%; height: auto; max-height: calc(100vh - 48px - 300px); /* Adjusting for lower panel */ }
  .map path { 
    fill: #203058; 
    stroke: rgba(255,255,255,0.6); 
    stroke-width: .6; 
    transition: fill .15s linear, opacity .2s ease, filter .2s ease; 
  }
  .map path:hover { filter: drop-shadow(0 0 6px rgba(0,229,255,.6)); }
  .map.dimmed path { opacity: .25; }
  .map path.active { fill: #2f4c8a; opacity: 1 !important; }
  
  /*
  ** Request 2: Pill label on the map
  */
  .svg-label { 
    position: absolute; 
    transform: translate(-50%, -50%); /* Center the pill on its coordinate */
    pointer-events: none; 
    padding: 6px 12px; 
    border-radius: 999px; 
    background: rgba(11, 23, 49, 0.85); /* Darker background */
    border: 1px solid var(--accent); 
    color: var(--text); 
    font-size: 13px;
    white-space: nowrap; 
    box-shadow: 0 0 10px rgba(0, 229, 255, 0.35); 
    transition: opacity .2s ease, transform .3s ease;
  }
  /* Removed .badge as we are using .svg-label now */
  .svg-label.correct { border-color: var(--good); box-shadow: 0 0 16px var(--good); }
  .svg-label.wrong { border-color: var(--bad); box-shadow: 0 0 16px var(--bad); }

  /* Removed cursor-tag as the name is placed on map */
  .cursor-tag { display: none; }
  
  .footer-note { font-size: 12px; color: var(--muted); margin-top: 8px; }

  /*
  ** Request 5: Media Queries for Mobile/Tablet optimization
  */
  @media (max-width: 800px) {
    .wrap {
      padding: 8px;
      gap: 8px;
    }
    .panel.controls {
      padding: 12px;
    }
    .map-panel {
      min-height: 40vh; /* Smaller min height for mobile */
    }
    .list {
      max-height: 200px; /* Shorter list on mobile */
    }
    .map svg {
        max-height: 100%;
    }
  }

  @media (max-width: 500px) {
    h1 {
      font-size: 18px;
    }
    .state-name {
      padding: 5px 8px;
      font-size: 12px;
    }
    .actions button {
      padding: 8px 10px;
      font-size: 13px;
    }
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="panel map-panel">
      <div class="map-shell">
        <div id="map" class="map">
          <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   xmlns:mapsvg="http://mapsvg.com"
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   version="1.1"
   id="svg2"
   height="695.70178"
   width="611.85999"
   mapsvg:geoViewBox="68.184010 37.084109 97.418146 6.753659"
>
  <metadata
     id="metadata44">
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title></dc:title>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <defs
     id="defs42" />
  <path
     id="IN-AN"
     title="Andaman and Nicobar Islands"
     d="m 537.188,685.44148 -0.041,0.4695 0.768,0.30627 0.104,2.47542 1.258,1.84675 -0.71,-0.0232 0.661,0.93295 -0.574,0.18739 -0.437,0.94503 0.103,1.88201 -0.409,0.42617 -0.663,-0.49065 -0.502,1.30269 -0.461,-0.2156 0.224,-1.08911 -0.606,-0.31434 -0.121,-1.2503 -0.813,-0.73346 0.069,-0.77879 -1.076,-1.12336 -0.646,0.17933 -0.121,-1.96159 0.365,-0.27304 -0.4,-0.27001 0.64,-1.36616 0.994,0.0584 0.564,-0.57427 0.878,0.27505 0.092,-0.68006 0.86,-0.14307 z m -2.826,-4.29496 0.895,1.77017 -2.249,2.47845 -0.57,-1.39035 0.238,-1.31478 1.704,-0.4695 -0.018,-1.07399 z m -6.972,-12.28743 0.62,0.37378 0.054,0.95511 0.372,-0.12392 0.733,0.79995 -0.07,1.22108 -0.819,-0.73849 -1.384,0.38789 -0.288,-0.63372 0.323,-0.48259 -0.855,0.17027 0.198,-1.45785 1.116,-0.47151 z m 3.502,-0.0695 0.743,0.76973 -0.11,1.34098 -1.472,-1.19389 0.529,-0.85234 0.383,0.60853 -0.073,-0.67301 z m 0.656,-2.05731 0.291,1.85178 -0.652,-1.69864 0.361,-0.15314 z m -1.091,-2.2447 0.394,0.70928 -0.884,1.04981 0.947,1.26743 0.041,1.10422 -0.412,-0.27001 -0.465,0.31837 -0.158,0.77476 -0.325,-0.99943 0.426,0.0796 0.114,-0.58536 0.146,0.45237 0.247,-0.67099 -0.938,0.56621 0.092,-0.83824 -0.627,-0.64883 -0.116,-1.08809 1.518,-1.22109 z m -6.096,-0.7264 0.087,0.94704 -0.404,-0.51281 0.317,-0.43423 z m -2.282,-1.91123 0.359,0.19848 -0.356,1.48404 1.639,1.28758 -0.11,0.45942 -1.593,-0.57024 -0.756,-1.02865 0.157,-1.47599 0.66,-0.35464 z m -1.725,-2.48851 0.285,0.72439 -0.466,-0.2005 0.181,-0.52389 z m 11.976,-2.12381 0.554,2.22556 -0.33,0.0282 -0.08,0.96619 -0.144,-3.21996 z m -17.337,-14.22082 0.765,1.02563 0.632,-0.27504 -0.606,0.35464 0.105,1.13444 -0.86,0.46244 -1.209,-0.15818 -0.228,-1.89409 0.96,-0.0353 0.151,-0.86645 0.29,0.25187 z m -5.693,-35.18985 0.303,0.69114 0.034,-0.42113 0.553,0.46244 0.043,1.32486 0.571,0.30426 0.19,2.31624 -1.188,1.3984 0.616,0.72339 -1.181,1.43165 -1.64,-0.7798 -1.035,0.34255 0.738,-1.75809 -0.843,-1.12537 -0.088,-2.43411 0.448,0.45035 1.244,-2.15202 0.892,-0.62565 0.231,0.45942 0.112,-0.60853 z m 2.629,-13.08436 0.929,1.5727 -0.763,0.62868 0.924,0.42415 -0.055,0.36472 -1.862,0.51684 -0.434,-0.43927 0.123,-0.72237 0.751,-0.10478 -0.195,-1.47195 0.582,-0.76872 z m -0.926,-0.67402 -0.284,0.15415 0.186,-0.91783 0.098,0.76368 z m -7.918,-1.08407 1.085,0.17632 -0.019,1.31679 -1.158,-0.1481 0.092,-1.34501 z m 6.716,-0.23474 0.622,0.3093 -0.822,0.74252 0.2,-1.05182 z m 10.071,-5.13723 1.075,0.16624 -0.465,0.49972 -0.716,-0.34457 0.106,-0.32139 z m -1.074,-4.07532 0.271,-0.21158 0.564,0.52793 0.933,2.47844 -0.237,0.44733 -0.886,-1.45482 -0.543,0.0383 -1.023,-1.01455 0.826,-1.1556 0.095,0.34457 z m 0.412,-1.48405 0.074,1.27046 -0.647,-0.61256 -0.046,-0.72641 0.619,0.0685 z m 0.807,-1.15963 0.371,2.3918 -0.807,-0.65185 0.006,-0.67401 -1.081,-0.74958 0.615,-0.12695 0.421,0.57831 0.475,-0.76772 z m 0.855,-1.16466 0.553,1.47598 -0.427,1.26038 -0.784,-1.06593 0.658,-1.67043 z m -7.699,-0.52088 0.06,1.5052 0.968,-0.15717 -0.584,2.06436 1.288,0.63271 -0.452,0.56521 -0.476,-0.43625 -0.055,0.53498 0.673,0.36169 -1.042,0.80298 0.111,2.37769 0.468,-1.74801 0.792,-0.0836 0.084,0.74555 -0.687,4.25768 -0.257,-0.22467 -0.058,0.48561 -0.813,-0.3637 0.133,0.79189 -0.88,0.34759 0.156,0.61356 0.294,-0.32945 0.144,0.38285 0.739,-0.78081 -0.176,-0.57931 0.734,0.44632 -0.947,4.02394 -0.272,-0.63674 -1.076,-0.31937 0.008,-1.07601 -0.615,0.20452 -0.202,-1.21806 0.583,0.0897 0.174,-0.4433 -0.264,-0.31233 -0.496,0.35061 -0.418,-1.78427 -0.55,0.50173 -0.324,-3.01141 -0.489,0.20553 -0.198,-0.48058 1.023,-2.1097 0.51,1.2624 0.312,-0.20553 0.053,0.83421 0.144,-0.28009 0.264,-4.95991 1.616,-2.84819 z m 0.75,0.37277 0.37,-0.0131 -0.121,0.73346 -0.526,-0.0897 0.277,-0.6307 z m 3.455,-0.807 0.246,0.70021 -0.456,-0.22971 -0.099,0.44733 -0.164,-0.60853 0.473,-0.3093 z m 3.685,-0.13097 0.187,0.52994 0.404,-0.49267 -0.109,1.20698 -0.783,-0.54102 0.301,-0.70323 z m -2.854,-0.40401 -0.404,1.06996 -0.432,-1.22915 0.529,0.16423 0.161,-0.64379 0.146,0.63875 z m -3.45,-0.63271 1.278,0.37076 0.601,-0.27102 0.48,0.85134 -0.638,0.43221 0.453,1.08709 -0.71,-0.0554 0.088,0.85738 -0.591,-0.16523 -0.426,0.74152 0.215,0.5108 -1.001,0.93596 -0.534,-0.67401 0.644,-3.04566 -0.578,-0.18639 0.169,-0.60651 0.297,0.21459 0.359,-0.45639 -0.106,-0.54103 z m 22.254,-0.22568 0.744,0.70223 0.114,1.10321 -1.131,-0.17632 -0.248,-0.86644 0.521,-0.76268 z m -18.511,-2.01398 -0.482,1.18481 -0.272,-0.10982 0.235,-1.08406 0.519,0.009 z m -5.117,-8.89721 0.142,2.36661 -0.486,-1.68957 0.344,-0.67704 z m 3.934,-1.86588 0.482,0.0766 -0.353,0.58737 0.48,0.0252 0.547,1.64928 -0.418,0.71431 0.97,1.37624 -0.47,1.44375 0.217,3.1313 -0.76,0.34254 -0.021,0.31938 0.562,-0.0403 -0.893,0.51483 -0.017,0.81204 -1.764,-0.46949 1.351,2.31019 -1.306,0.3758 -1.274,-0.36774 -0.351,0.51584 -0.719,-0.0997 -0.439,-0.60551 0.168,-5.76087 -0.481,-0.23978 0.412,0.0141 1.029,-1.36013 -0.528,-0.48057 0.377,-0.63069 -0.465,-2.24672 0.291,0.36068 1.548,-1.94044 0.653,0.52189 0,0 0.628,-0.14911 0,0 0.544,-0.70021 z m -4.254,-1.63618 0.507,0.29217 0.034,1.9344 -0.425,1.01455 -0.541,0.11385 0.285,0.41105 -0.437,0.73447 -0.419,-1.68957 0.448,-2.16209 0.548,-0.64883 z m 6.511,-0.1078 -0.569,0.64379 0.07,0.69819 -0.646,-0.12996 0.163,-1.03974 0.261,0.42416 0.721,-0.59644 z m 0.475,-12.41236 0.326,1.0357 -0.216,1.94044 0.222,0.67603 0.337,-0.37076 0.198,0.32341 -0.326,0.51483 0.739,0.99642 -0.519,0.70726 -0.691,-0.90876 -0.617,-0.1743 -0.355,0.52692 -0.337,-0.67502 -0.412,0.35161 1.233,0.51483 0.063,0.93395 0.704,-0.11384 -0.007,0.49065 0.437,-0.28714 -0.721,2.016 0.056,2.10668 -0.648,1.12739 -0.797,-0.13904 0.185,0.47655 -0.837,-1.03369 -0.385,0.14709 -0.306,0.69517 0.771,1.08609 -0.548,0.53195 -0.113,-0.82715 -0.517,0.0494 -0.583,1.18884 0.388,0.95007 0,0 -0.628,0.14911 0,0 -1.021,-0.81909 -10e-4,-1.5314 0.505,-0.0242 0.143,-0.55815 -0.769,-0.1209 0.174,-1.53039 0.535,-0.14911 -0.256,-0.65689 0.785,-0.26396 -0.791,-0.29923 0.378,-1.79838 0.559,-0.44229 -0.669,-0.43121 0.413,-0.53196 -0.431,-0.16825 0.372,-1.40042 0.576,-0.23172 -0.5,-0.35867 0.518,0 0.343,-0.59241 -0.262,-0.89869 1.21,-0.65286 -0.25,-0.74756 0.989,-0.1743 0.506,0.35867 -0.023,-0.97626 0.467,0.67099 0.404,-0.67804 z m -0.285,-2.21549 0.251,1.06089 -1.069,-0.6055 0.818,-0.45539 z m 13.096,-26.52437 -0.617,1.4518 0.021,-0.82615 0.596,-0.62565 z" />
  <path
     id="IN-AP"
     title="Andhra Pradesh"
     d="m 295.438,482.23741 -0.002,0.007 0,0 0.002,-0.007 z m 0.652,-0.0393 -0.389,2.49054 -0.753,-1.07903 -0.016,-0.80298 1.158,-0.60853 z m -0.652,0.0393 -0.122,-0.62767 -0.272,0.4433 -1.262,0.0977 -0.058,-0.73144 -0.901,0.58133 1.737,0.7667 0,0 -0.023,1.03873 0.454,0.14004 0.663,1.50017 -7.647,3.77106 -4.692,1.85681 -3.756,-1.06895 -3.105,0.36975 -2.669,1.33493 -2.599,5.73367 0.099,0.96921 -2.908,3.10007 -0.273,0.46546 0.384,0.87048 -0.948,0.83521 -3.03,0.41106 -0.866,-1.47094 0.261,-0.7788 0.373,0.006 -0.117,-0.58032 -2.482,-0.87249 -3.128,0.60651 -2.228,1.07097 -1.913,1.26945 -1.459,1.6402 -1.448,4.49646 -2.123,3.3872 -1.075,5.04353 1.396,7.50586 1.762,3.11215 -1.448,10.08303 2.407,6.52153 -0.174,3.87786 1.651,4.44205 -3.018,-5.51604 -0.564,-0.25692 -0.116,1.91022 -0.617,-0.62263 0.355,-0.61659 -0.401,-0.0776 -1.169,1.85077 2.315,2.12481 1.569,0.0363 1.581,1.4105 0,0 0.001,1.1425 -0.756,-0.42516 -0.956,-1.89007 -1.638,-0.0433 -1.73,-1.26642 -1.577,0.17228 -0.083,0.42113 0.891,0.17833 0.069,0.37378 -0.631,-0.0705 -0.22,0.60953 -0.702,0.17631 0.029,0.71936 -0.644,0.29217 0.441,0.65084 -0.587,0.82111 -1.556,0.70021 -1.065,-0.0191 -0.429,0.47957 -0.538,-0.44632 -0.687,0.65789 1.332,1.04982 -0.848,0.61457 -0.451,-0.57931 -0.714,0.31131 0.153,-0.57024 -0.476,0.0957 -0.1,-1.1294 -1.848,0.78685 -0.66,-0.46848 -0.271,-0.94604 -2.238,-0.27001 -1.136,0.44229 1.056,0.46748 -0.297,1.49009 0.529,-0.38084 0.197,0.28109 -0.5,0.17732 0.045,0.45338 -1.591,0.5249 0.142,0.71633 -0.976,0.70626 -0.849,-0.95309 -1.027,0.1219 -10e-4,0.68107 -0.615,0.41509 -0.758,1.66338 -1.751,-0.1471 -1.873,-1.34097 -1.365,0.1884 -0.438,0.70222 0.653,0.35464 -0.895,-0.0232 -0.123,-1.42964 -2.722,0.87753 -0.912,-0.23072 -0.182,1.11329 -0.893,-0.29117 -0.784,0.83925 0.691,1.28657 -0.439,-0.004 -0.916,3.18974 -0.762,0...
<path
     id="IN-UT"
     title="Uttarakhand"
     d="m 249.742,143.04543 0.231,0.91179 -0.613,0.42717 -1.115,-0.57326 0.434,0.39695 -0.605,0.93798 0.517,1.32184 -0.884,0.4705 -0.935,1.79939 -1.408,0.59039 -1.245,-0.58435 -0.329,0.74454 -1.21,0.13501 -1.257,1.00044 -1.775,0.0846 -0.763,0.89164 -0.51,-0.12997 -0.1...
...
     title="West Bengal"
     d="m 438.411,373.06456 -0.106,-0.61862 1.488,-0.1884 0.138,0.44229 -0.43,0.56923 -0.297,-0.20754 -0.158,0.49065 0.379,-0.31031 0.53,0.6579 0.943,-0.0222 1.12,1.42863 0.817,-0.20453 0.925,0.38991 -0.214,0.79995 1.157,-0.51383 0.261,1.73894 -0.545,0.85436 0.245,-0.19344 0.139,0.73548 0.473,-0.0161 0.845,1.13343 -0.261,1.10724 1.639,0.26396 -0.199,0.64782 -0.637,-0.0161 -0.21,1.29061 1.193,0.41509 -0.379,0.23071 0.229,0.44632 -0.686,0.0957 -0.215,0.92488 -0.342,-0.35565 -0.632,0.48259 0.419,0.79794 -0.767,-0.0322 -0.115,0.8604 -0.786,0.0464 0.488,0.94704 -1.215,0.36976 0.16,0.76973 -0.672,0.63573 -0.587,0.36067 -0.327,-0.0373 -0.476,0.51988 -0.328,-0.87552 0.353,-0.6035 0.77,-1.54751 -0.722,0.0191 -0.308,-0.57327 -0.739,0.23877 0.076,-1.20698 0.505,-0.2277 0.117,-0.84025 -1.026,0.41308 -0.468,-0.89969 -0.999,-0.0111 -0.219,-1.21806 0.395,-0.31938 -0.252,-0.94604 0.654,-1.02966 -1.258,-0.69719 0.354,-0.49166 -0.151,-0.38789 0.559,-0.49065 -0.602,-1.05988 0.174,-0.69113 -1.24,-0.29721 -0.134,-0.92589 1.185,-0.25894 0.225,-0.48965 -0.476,-0.17632 0.47,-0.50678 -0.358,-0.64278 1.054,-0.0907 -0.063,-0.62363 0.694,-0.27001 -0.36,-0.7516 -0.445,-0.0907 -0.557,0.43523 0.053,-0.74555 -0.438,-0.48561 0.771,-1.26845 -0.143,-1.25737 0.906,-0.21359 0.407,-0.50475 -0.048,0.56722 0.403,-0.0242 0.463,-0.67905 -0.188,-0.67704 0.645,-0.0353 -0.198,-0.65689 1.767,-1.00548 -0.144,-0.76671 -1.874,-2.27795 -2.103,-1.46389 0.231,-2.99529 z" />
</svg>
        </div>
        <div id="mapLabels" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;"></div>
      </div>
    </div>

    <div class="panel controls">
      <h1>üó∫Ô∏è India Map Match</h1>
      <div class="hint">Left click ‡§ï‡§ø‡§∏‡•Ä state ‡§ï‡•á ‡§®‡§æ‡§Æ ‡§™‡§∞ ‚Üí ‡§´‡§ø‡§∞ map ‡§™‡§∞ ‡§∏‡§π‡•Ä state ‡§Æ‡•á‡§Ç click ‡§ï‡§∞‡§ï‡•á ‡§®‡§æ‡§Æ drop ‡§ï‡§∞‡•ã‡•§ ‡§≠‡§∞‡•á ‡§π‡•Å‡§è state ‡§™‡§∞ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ click ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§™‡•Å‡§∞‡§æ‡§®‡§æ ‡§®‡§æ‡§Æ ‡§π‡§ü‡§ï‡§∞ list ‡§Æ‡•á‡§Ç ‡§µ‡§æ‡§™‡§∏ ‡§Ü ‡§ú‡§æ‡§è‡§ó‡§æ‡•§ Score Check ‡§™‡§∞ ‡§™‡•Ç‡§∞‡§æ state green/red ‡§π‡•ã ‡§ú‡§æ‡§è‡§ó‡§æ‡•§</div>
      <div class="actions">
        <button id="btnShuffle">Shuffle</button>
        <button id="btnReset">Reset</button>
        <button id="btnScore">Score Check</button>
      </div>
      <div>
        <span class="pill" id="remainingCount">Remaining: ‚Äî</span>
        <span class="pill" id="placedCount">Placed: 0</span>
      </div>
      <div class="list" id="stateList"></div>
      <div class="score" id="scoreLine"></div>
      <div class="footer-note">Neon mode ‚Ä¢ Kids friendly ‚Ä¢ India states + UTs</div>
    </div>
  </div>

<script>
  // Utility function for shuffling an array (Fisher-Yates)
  function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  // DOM elements
  const stateListEl = document.getElementById('stateList');
  const btnShuffle = document.getElementById('btnShuffle');
  const btnReset = document.getElementById('btnReset');
  const btnScore = document.getElementById('btnScore');
  const remainingCount = document.getElementById('remainingCount');
  const placedCount = document.getElementById('placedCount');
  const scoreLine = document.getElementById('scoreLine');
  const mapEl = document.getElementById('map');
  const svgEl = mapEl.querySelector('svg');
  const paths = svgEl.querySelectorAll('path');
  const mapLabelsEl = document.getElementById('mapLabels'); // Request 2: New label container

  // Game state
  let regions = [];
  let uniqueRegions = [];
  let selectedName = null;
  let placements = []; // Stores { regionId, name, correct, elText (the pill label), elPath, chip }
  
  // No longer needed after Request 2 change: let cursorTag = null;

  // --- Utility Functions for Labeling and Placement ---

  /*
  ** Request 2: Pill label creation
  */
  function createPillLabel(name, x, y) {
    // x, y are pixel coordinates relative to mapLabelsEl (which is inside map-panel)
    const label = document.createElement('div');
    label.className = 'svg-label';
    label.textContent = name;
    label.style.left = `${x}px`;
    label.style.top = `${y}px`;
    mapLabelsEl.appendChild(label);
    return label;
  }
  
  /*
  ** Request 2: Simple center calculation (used instead of complex SVG path centroid)
  ** Finds the center of the path's bounding box and converts it to a screen pixel position
  ** relative to the mapLabelsEl container.
  */
  function getRegionCenter(regionId) {
      const path = document.getElementById(regionId);
      if (!path) return { x: 0, y: 0 };
      
      const mapShellRect = mapLabelsEl.getBoundingClientRect();
      const pathRect = path.getBoundingClientRect();

      // Calculate the center point in pixel space relative to mapLabelsEl (map-shell)
      const centerX = (pathRect.left + pathRect.right) / 2 - mapShellRect.left;
      const centerY = (pathRect.top + pathRect.bottom) / 2 - mapShellRect.top;
      
      return { x: centerX, y: centerY };
  }

  /*
  ** Request 4: Function to handle removal of an existing placement
  */
  function onRemovePlacement(placement) {
    // 1. Remove the label element (the pill)
    if (placement.elText) {
        placement.elText.remove();
    }
    // 2. Clear state coloring/styles
    if (placement.elPath) {
        placement.elPath.classList.remove('active');
        placement.elPath.style.fill = '#203058'; // Revert to original path color
        placement.elPath.style.filter = ''; // Remove filter/glow
    }
    // 3. Remove from the placements array
    const index = placements.indexOf(placement);
    if (index > -1) {
        placements.splice(index, 1);
    }
    // 4. Return chip to list (handled in onMapClick)
    
    updateCounters();
  }

  function updateCounters() {
    remainingCount.textContent = `Remaining: ${document.querySelectorAll('.state-name:not(.removed)').length}`;
    placedCount.textContent = `Placed: ${placements.length}`;
  }

  function clearHighlights() {
    paths.forEach(p => p.classList.remove('active'));
    // Also clear existing pill selections for a cleaner map (if any were selected)
    mapLabelsEl.querySelectorAll('.svg-label').forEach(l => l.classList.remove('correct', 'wrong'));
  }

  function buildStateList() {
    stateListEl.innerHTML = '';
    // Use regions to get the list of names
    uniqueRegions = regions.map(r => ({id: r.id, name: r.title}));
    
    // Filter out placements that were successful after score check, for reset/shuffle
    const order = shuffle(uniqueRegions.slice()); 
    
    for (const r of order) {
      const chip = document.createElement('button');
      chip.className = 'state-name';
      chip.textContent = r.name;
      chip.dataset.name = r.name;
      chip.addEventListener('click', () => onSelectName(chip));
      stateListEl.appendChild(chip);
    }
    updateCounters();
  }

  function onSelectName(chip) {
    // Deselect others
    stateListEl.querySelectorAll('.state-name').forEach(c => c.classList.remove('selected'));
    chip.classList.add('selected');
    selectedName = chip.dataset.name;
    // removeCursorTag(); // Not needed anymore
    clearHighlights();
  }

  // --- Initial Setup ---

  // 1. Load regions from the SVG path titles
  paths.forEach(path => {
    const title = path.getAttribute('title');
    if (title && path.id) {
      regions.push({ id: path.id, title: title });
    }
  });

  // 2. Build the initial list
  buildStateList();
  
  // 3. Attach click listener to all paths (The core game logic)
  paths.forEach(path => {
    path.addEventListener('click', () => {
      const regionId = path.id;
      
      // Check for existing placement on this path (Request 4)
      const existingPlacement = placements.find(p => p.regionId === regionId);

      if (!selectedName) {
        // If no name is selected, but a filled state is clicked, remove the placement
        if (existingPlacement) {
          const oldName = existingPlacement.name;
          onRemovePlacement(existingPlacement);
          
          // Return old chip to list and make it selectable again
          const oldChip = document.querySelector(`.state-name[data-name="${oldName}"]`);
          if (oldChip) {
            oldChip.classList.remove('removed', 'selected');
          }
        }
        return; // Exit if no name is selected
      }

      // If a name IS selected and an existing placement is found (Request 4)
      if (existingPlacement) {
          // 1. Remove old placement and return name to list
          const oldName = existingPlacement.name;
          onRemovePlacement(existingPlacement);
          
          // 2. Make the old name selectable again
          const oldChip = document.querySelector(`.state-name[data-name="${oldName}"]`);
          if (oldChip) {
            oldChip.classList.remove('removed', 'selected');
          }
          // The click event continues to place the *newly* selected name below
      }
      
      // Proceed with new placement
      const nameChip = document.querySelector(`.state-name.selected`);
      if (nameChip) {
          const correctName = path.getAttribute('title');
          const isCorrect = selectedName === correctName;
          
          // Create the pill label (Request 2)
          const center = getRegionCenter(regionId);
          const labelEl = createPillLabel(selectedName, center.x, center.y);
          
          // Update path style for active/filled state
          path.classList.add('active');
          
          // Add to placements
          placements.push({
              regionId: regionId,
              name: selectedName,
              correct: isCorrect,
              elText: labelEl,
              elPath: path,
              chip: nameChip
          });
          
          // Update list and clear selection
          nameChip.classList.add('removed');
          selectedName = null;
          // removeCursorTag(); // Not needed
          clearHighlights();
          updateCounters();
      }
    });
  });

  // --- Button Listeners ---

  btnShuffle.addEventListener('click', () => {
    buildStateList();
    btnReset.click(); // Reset placements on shuffle
  });

  btnReset.addEventListener('click', () => {
    // reset selections and placements
    selectedName = null;
    // removeCursorTag(); // Not needed
    clearHighlights();
    
    // Clear all labels from map
    mapLabelsEl.innerHTML = ''; 
    
    placements.splice(0, placements.length);
    
    // Revert map path styles
    document.querySelectorAll('.map path').forEach(p => {
        p.style.fill = '#203058'; // Revert fill
        p.style.filter=''; // Remove filter/glow
        p.classList.remove('active');
    });

    stateListEl.querySelectorAll('.state-name').forEach(c => c.classList.remove('removed','selected'));
    scoreLine.textContent = '';
    updateCounters();
  });

  btnScore.addEventListener('click', () => {
    let ok = 0, bad = 0;
    
    // Clear any previous color feedback from map paths before applying new score colors
    paths.forEach(p => {
      p.style.fill = '#203058';
      p.style.filter = '';
    });

    placements.forEach(pl => {
      const path = document.getElementById(pl.regionId);
      
      if (pl.correct) { 
        ok++; 
        pl.elText.classList.add('correct'); 
      }
      else { 
        bad++; 
        pl.elText.classList.add('wrong'); 
      }
      
      // Request 3: Full state color change
      if (path) {
        path.style.fill = pl.correct ? 'var(--good)' : 'var(--bad)';
      }
    });

    // Update score line
    scoreLine.textContent = `Score: ${ok} Correct, ${bad} Wrong.`;
    
    // Re-enable all path hover effect (filter/glow) on score check
    paths.forEach(p => p.style.filter=''); 
  });
</script>
</body>
</html>
